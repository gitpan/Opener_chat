2009-1-18
添加多国语言的支持
by_alexe


2009-1-15
修改
1 ping机制的次数即是改为时间计时 去除了前台和后台的等待时间对应关系
2 修改数据传递为指针类型
3 通过排序解决 数据传递过快时 用户名没有初始化问题
4 发现问题，后台数据过快时用户列表出现混乱问题。写入数据是忘记写入回车。
5 发现数据重复读取现象。错误现象，重复输出显示了。
6 交换文件空行开头，原因清空是加上的一个回车。

2009-1-13
通过对treeview控件的操作，来控制右端窗体的显示，选择不同的讨论组信息。
下一步计划 1，对配置文件的设置没有删除操作 所以对与配置文件的操作没有起到作用
2，主动单击聊天时，发现不能够发送信息，应该是对应的api中间接口选择错了
3 气球框的显示问题， 气球框显示时单击应该弹出窗口。
4 查找ping机制退出的原因
5 开始处理用户列表框的右键事件
6 对于没有讨论组的情况下 右边窗口的现实问题


2009-1-12
扩展组的概念 机制：通过控制哈希结构，调用一个固定函数与该哈希同步空间的显示。

2009-1-9
前台写入数据时失败造成后台不断死掉 原因 添加方式写入时 由于文件锁的原因而使得写入文件失败。
计划 # 扩充协议：1 添加，退出用户，用户列 表中增加类型名关键字将用户名扩展到全路径
     列表更新包括初始化 添加删除更名 

2009-1-8
发现 中间模块 的对打开的文件句柄 保存到变量时 应注意打开文件的关键字的唯一性。

2009-1-7
将中间接口模块 一分为三 成功完成

2009-1-6
增强功能到，可以外界所有聊天程序，现在默认添加irc和msn接口 可以同时登陆多个帐户
今天修改： 1 去掉前台在中间模块中的所有关于 全局$this的引用，修改writting.
	   2 对于好友的显示部分 添加了详细的说明
	   3 可以实现主动发出聊天请求连接
	   4 对于以前的修改配置文件的控制部分做了处理
	   5 将以前的聊天记录 由私有聊天，公共聊天扩展到 类型->登录名->聊天记录，其中群聊信息文件为 时间 私聊信息文件名为聊天对象名 
	   6 添加日志部分

下一步打算 1 将中间模块有一个变成3个  1 前台 2后台 3公用部分  对于函数名要注意命名规范
	   2 将前台对中间模块的调用 部分重写 将后台对中间模块的调用重写
	   2 将左边的显示采用新控件选择有3个1 listview 2 treeview 3 自造控件 由按钮和listbox可以实现类似于qq的动画菜单效果

2008-12-4
添加文件锁部分 实现交换文件的唯一性，
发现一个新问题，程序会无缘无故死掉，因该是网络段死掉。
特殊说明：ircpm ping机制
1 程序默认在0.5秒内读取文件一次，同时检测对方的ping消息，如果存在就将$this->{'guiw'} 或$this->{"sockw"} 置0 标识对方存在。 自己的ping消息，如果发现自己的ping消息不见了，就会设置$wping为1 写入自己的ping消息。
2 如果在10次循环中（也就是5秒）都没有找到对方的ping消息 则代表对方已经不存在了，那么就像前自己发送一个消息 退出
3 如果遇到特殊情况下，比如前台或后台还没有初始化完毕或 有操作需要花费超过5秒钟的时间时可以设置 暂停对方的ping消息检测，但这段时间控制在1分钟内
4 程序会每隔5秒钟强制（不管是不是得到数据）向交换文件中写入一次数据，以保证ping消息的及时性。也就是说如果对方在很长时间内都没有数据传递，那么就不能够覆盖原先的数据，但不覆盖原先的数据就没有办法删除掉对方的ping消息。不删除这个消息就不知道对方还是不是存在。所以必须要删除这个消息，让对方检测到后从新写入，以保证对方的存在。（一般情况下4秒钟写入一次）
5 总之，将每隔0.5秒写入的ping消息改为了5秒。减少了程序读写磁盘的次数。
by_lishang

2008-11-28
修正了当点击服务连接以后，该菜单可以立即继续选择的问题。
修正了当程序退出时，已经开启的服务无法退出的问题。
修正了弹出freenode的信息的问题。（可能修正的不对）
by_alexe

2008-11-27
彻底丢弃vnc_control模块与dos.pm模块，将两个模块的功能集中到remote_control中。
清理main.pm中相关的remote_control的部分。
整理了kongzhi.pl文件，考虑将kongzhi.pl与beikong.pl合成一个文件。
修正了remote_control中的逻辑问题。
修正了ircpm的runperlfile中无法正确返回pid的问题。
让所有的Messagebox都topmost
by_alexe

2008-11-25
添加vnc远程控制功能。添加一个network.pm模块，用来做网络测试，获取网络信息。
修改dos.pm模块，将其嵌入到vnc_control模块中。

2008-11-22
修改3处菜单 1最小化到托盘  2，dos请求服务 3，vnc的请求服务 将这些菜单改成双意菜单，只要单击一次后其功能和说明就会改为反义。
修改托盘菜单 在右键事件触发时改变最小化到托盘项的显示名称
将封装到哈希$g中的setting项在外面定义说名，原因：setting的数据来源于getini函数，该函数具有初始化哈希的功能，如果在哈希内部定义那么就起不到初始化的意义。造成问题：无法从配置文件中读取出程序的的一些配置信息使得每次关闭程序都会弹出最小化到托盘或关闭提示信息。对于声音气球框和聊天记录的写入与否的设置都为程序默认值。也就是说关闭不了。
改变最小化关闭程序选择提示框的提示信息为	"是否要将程序还是最小化到托盘？" 增大了保留程序到托盘的可能性。
删除部分大的注释，去掉了而生成command.txt部分（中介接口数据走向显示文件）；

2008-11-21
合并两个声音文件到一个pm文件中

2008-11-20
修改main.pm，将其中琐碎的全局变量集中到一个$g指针中。
去除几个模块中无用的new调用。
修正了显示聊天的部分显示不统一的问题。
by_alexe

2008-11-19
单击托盘图标可以实现主窗体前端显示。
修改弹出全部弹出窗口的过程  过程为私聊消息， 共聊消息， 聊天窗体。
解决 图标煽动问题 到主循环 去除原先的新建timer空间的方法。
先发现的问题 1 多窗口时无法前端显示 2 删除临时文件 3 修改原先的dos命令行方式为调用接口函数
by_lishang

2008-11-18
修复具体步骤见ircxg.xls
晚上，添加命令接口 修改得到的数据成三种样式 1群聊 2私聊 3命令或消息。

2008-11-17
添加小窗体 esc 退出设置 输入框得到焦点功能
添加清屏，vnc，昵称修改，保存聊天记录选项，更新用户列表，自动启动 菜单
实现清屏，昵称修改，更新用户列表功能

2008-11-15
修复列表排序 添加用户改为插入 删除用户采用FindString 方法寻找 

2008-11-14
添加前台 time事件 去掉change.pm中等待问题
更名问题 有用户名更名误认为是自己更名 模式匹配错误 一个.+ 匹配所有
写入速度问题 从5秒到30秒再到5秒
没有得到列表信息问题  在后台读取登录信息前 前台将登录信息删除掉了 出现了后台登陆到了#c频道
后台结束后前台的翻译速度慢  位置获取用户列表后 设置startok=1 位置放到了next后面导致没有运行机会
by_lishang

2008-11-13
将升级部分独立成一个程序 将所有启动新进程部分统一到一个函数 runperlfile
特殊说明：由于下载列表更新显示通过中间接口传递速度慢 可能造成不必要的麻烦(比如:明明已经下载完了所有更新文件但是前台才刚度取出第一个文件名） 所以选择有更新进程启动前台进度显示 由于原始李原军显示部分通过另起一个进程进行 还用到了有关前台窗体的东西进行进度条显示。所以丢弃原始方案直接由程序生成进度。
by_lishang 

2008-11-04
修改了TIMER控件实现来信息提示，修改了二次发信息出错的BUG，与李尚的程序进行整合！

2008-11-01
修正了远控时候主控端进程销毁时，被控端死循环的问题
2008-10-30
修正了隐藏托盘后无法显示聊天信息的BUG，增加了系统声音，窗体隐藏托盘后，来信息的气球，图标和声音提示！！！

2008-10-29
将远控部分重新封装到一个新的模块！
2008-10-28
更改了远控的实现方式，通过SOCKET实现反向连接。弹出CMD窗口实现控制！客户端可以请求连接或断开，服务端可以接受或拒绝。
2008-10-27
继续修正systray图标点击后的效果。

2008-10-26
完全修正了richedit控件中显示文字的问题。
修正了NI_Click函数中的窗口显示问题。
修正了chat.pm的窗口图标问题。
修正了当发送为空时返回的focus焦点到输入控件。
修正了setting.pm中对于setting.ini文件的写入问题。对于显示为白帽子聊天服务器的部分写入变换为irc.freenode.net。
对于频道#opener部分，后面的数值提取出来，放到白帽子公共频道后面。写入时亦然。

2008-10-25
修正了main.pm中sprintf参数不对的bug。
修正了setting.pm中正则匹配irc.freenode.net时的错误。
删除了messagebox的时候的一个不必要参数。
修正了公众聊天记录时不必要的代码部分。将建立目录的部分放在最前面。
修正了systray显示中的错误。包括退出时的删除icon.
去除一些无用的代码。
修正了私聊时无法记录聊天历史的问题。
对于sendText函数改名为send_Text，并对快捷键调用的部分做了合并。main.pm与chat.pm都做了更改。
修正了richedit控件中由于使用ReplaceSel函数导致插入数据可能不正确的问题。main.pm与chat.pm都做了更改。

2008-10-21
聊天内容分不同颜色显示用RICHEDIT实现
修改Ulead发送信息滚动条不随之下移的问题加-keepselection属性!
配置信息的默认服务器默认频道都固定化!



2008-10-21
修改了在没有网络连接时候出现无限循环滚动条的问题!



2008-10-20
修改用户更新问题，对于退出组而没有退出服务器的命令经进行解析。
添加网络段用户列表更新写入文件部分
添加 空用户的情况



最新修改:2008 10 18
默认服务器为白帽子聊天服务器
频道为公共聊天频道
修改了用户列表显示自己的问题
聊天显示信息更改为墨绿色
最新修改:2008 10 20
修改irc.pl加文件锁使聊天程序只能运行一次.
公共聊天记录按照月份进行分类记录!



白帽子IRC聊天
最后修改时间2008年10月18号
by lishang&hackbozy&ice

###############################
文件列表

irc.pl           主进程   调用main.pm

main.pm          主窗体模块    该模块调用接口ircpm.pm,网络进程sockstage.pl,私聊窗体chat.pm,配置模块settings.pm  

chat.pm          私聊模块,私聊发送接收信息

settings.pm      配置模块,配置服务器,频道,昵称,端口

sockstage.pl     IRC网络连接,IRC网络传输数据实现功能的主进程,调用接口模块

ircpm.pm         网络接口模块,实现主窗体与网络连接直接的对接

###############################

程序现有功能:
本程序用perl的WIN32:GUI编写,每一个窗体定义一个模块,irc.pl启动主进程后,调用main.pm的初始化函数,并显示主窗体,之前要加载进度条,当登陆成功后进度条消失(CPU占用率问题王哥已经解决),并刷新用户列表框.主窗体居中显示,800*600,可以最大化最小化,窗体内控件随窗体大小而改变,窗体最小化到托盘后有弹出菜单项(关于和帮助),托盘图标支持气球框.
主窗体菜单分为配置和帮助,配置调用settings.pm模块进程基本配置,帮助分为请求服务,断开服务,和关于三项进入主窗体后有用户远程服务的标签,是否启动远程服务.主窗体包含用户列表,聊天内容显示,发送文本框.基本信息标签框,发送按钮.发送按钮支持快捷键.更新了昵称标签显示不开造成内容换行的问题,建房用户会出现@符号,修改了给@符号用户发信息出错的问题.基本信息改为中文显示.发送信息,会跟随显示发送接收时间,会创建一个文件夹,保存聊天记录.发送空信息会提示错误.双击弹出私聊窗体,私聊窗体大小也可以改变,控件也随之改变.私聊窗体支持快捷发送键,聊天记录也会记录在一文件夹的聊天对象为名的文本文件中.双击用户列表限制了不重复弹出窗体.
网络端实现Win32::Process开进程,并进行昵称重名后的修改与提示,优化修改了网络连接的结构.










